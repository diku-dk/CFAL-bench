#!/usr/bin/env python3
#
# From a JSON file generated by 'futhark bench', print on stdout the memory
# usage for a benchmark and dataset.

import sys
import json

_, json_fname, entry_point, dataset = sys.argv

J = json.load(open(json_fname, 'r'))

GPU_SPACE="space 'device'"
mem = J[entry_point]['datasets'][dataset]['bytes']
if GPU_SPACE in mem:
    print(mem[GPU_SPACE])
else:
    print(mem['default space'])

